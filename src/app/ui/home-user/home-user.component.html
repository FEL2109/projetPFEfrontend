<nz-layout>
  <!-- Topbar supprimée, tout est dans le nz-header -->
  <nz-header class="main-header" style="position: fixed; top: 0; left: 0; width: 100%; z-index: 1001;">
    <div class="main-header-content">
      <div class="main-header-left">
        <img src="assets/images/logo.png" alt="Logo Ingecys" class="main-header-logo" />
        <nav class="main-header-nav">
          <a routerLink="/home-user/tableau-de-bord" routerLinkActive="active-link" title="Tableau de bord">
            <mat-icon class="nav-icon">dashboard</mat-icon>
            Tableau de bord
          </a>
          <a routerLink="/home-user/soumettre-demande-conge" routerLinkActive="active-link" title="Demandes de congés">
            <mat-icon class="nav-icon">event_note</mat-icon>
            Demandes de congés
          </a>
          <a routerLink="/home-user/mes-demandes-conges" routerLinkActive="active-link" title="Mes demandes">
            <mat-icon class="nav-icon">assignment</mat-icon>
            Mes demandes
          </a>
          <a routerLink="/home-user/calendrier-jours-officiels" routerLinkActive="active-link" title="Calendrier">
            <mat-icon class="nav-icon">calendar_today</mat-icon>
            Calendrier
          </a>
          <a routerLink="/home-user/solde-conges" routerLinkActive="active-link" title="Solde de congés">
            <mat-icon class="nav-icon">account_balance_wallet</mat-icon>
            Solde de congés
          </a>
        </nav>
      </div>
      <div class="topbar-right">
        <button nz-button nzType="text" nzShape="circle" class="topbar-btn" title="Notifications" matRipple [matBadge]="notifications.length" matBadgeColor="warn" matBadgeOverlap="false" (click)="toggleNotifications()">
          <mat-icon style="color: #222;">notifications</mat-icon>
        </button>
        <div *ngIf="showNotifications" class="notifications-popup">
          <div class="notifications-popup-header">
            <span>Notifications</span>
            <button nz-button nzType="text" (click)="toggleNotifications()" style="float: right; font-size: 1.2em;">&times;</button>
          </div>
          <div *ngIf="notifications.length; else noNotif" class="notifications-popup-list">
            <ul>
              <li *ngFor="let notif of notifications">
                <span class="notif-text">{{ notif.text }}</span>
                <span class="notif-date">{{ notif.time | date:'dd/MM/yyyy' }}</span>
              </li>
            </ul>
          </div>
          <ng-template #noNotif>
            <div class="notif-empty">Aucune notification récente.</div>
          </ng-template>
        </div>
        <button nz-button nzType="text" nzShape="circle" class="topbar-btn" title="Profil" (click)="goToProfil()" matRipple>
          <mat-icon style="color: #222;">account_circle</mat-icon>
        </button>
        <button nz-button nzType="text" nzShape="circle" class="topbar-btn" title="Se déconnecter" (click)="logout()" matRipple>
          <mat-icon style="color: #222;">logout</mat-icon>
        </button>
      </div>
    </div>
  </nz-header>
  <nz-layout style="margin-top: 80px;">
    <nz-content class="content-container">
      <router-outlet></router-outlet>
    </nz-content>
  </nz-layout>
</nz-layout>
